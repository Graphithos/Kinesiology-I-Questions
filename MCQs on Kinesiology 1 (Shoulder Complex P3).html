<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MCQs on Kinesiology 1 Lecture No. 3 Quiz</title>
    <style>
        :root {
            --bg-color: #f5f7fa;
            --container-bg: white;
            --text-color: #333;
            --border-color: #ddd;
            --primary-color: #3498db;
            --header-color: #2c3e50;
            --secondary-text: #7f8c8d;
            --progress-bg: #ecf0f1;
            --question-bg: #f8f9fa;
            --option-bg: #fff;
            --option-hover: #f1f8ff;
            --option-selected: #d1ecf1;
            --correct-bg: #d4edda;
            --correct-border: #28a745;
            --incorrect-bg: #f8d7da;
            --incorrect-border: #dc3545;
            --button-bg: #3498db;
            --button-hover: #2980b9;
            --button-disabled: #bdc3c7;
            --restart-bg: #2ecc71;
            --restart-hover: #27ae60;
            --review-bg: #f39c12;
            --review-hover: #e67e22;
            --toggle-bg: #ecf0f1;
            --toggle-slider: white;
            --toggle-text: #7f8c8d;
        }

        .dark-mode {
            --bg-color: #1a1a2e;
            --container-bg: #16213e;
            --text-color: #e6e6e6;
            --border-color: #394867;
            --primary-color: #4cc9f0;
            --header-color: #e6e6e6;
            --secondary-text: #a9a9a9;
            --progress-bg: #394867;
            --question-bg: #1f4068;
            --option-bg: #16213e;
            --option-hover: #1f4068;
            --option-selected: #1f4068;
            --correct-bg: #2d5a2d;
            --correct-border: #4caf50;
            --incorrect-bg: #5a2d2d;
            --incorrect-border: #f44336;
            --button-bg: #4cc9f0;
            --button-hover: #3aa8d0;
            --button-disabled: #5d6d7e;
            --restart-bg: #2ecc71;
            --restart-hover: #27ae60;
            --review-bg: #f39c12;
            --review-hover: #e67e22;
            --toggle-bg: #394867;
            --toggle-slider: #4cc9f0;
            --toggle-text: #e6e6e6;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            padding: 20px;
            transition: background-color 0.3s, color 0.3s;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: var(--container-bg);
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
            transition: background-color 0.3s, box-shadow 0.3s;
        }
        header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--primary-color);
            position: relative;
        }
        h1 {
            color: var(--header-color);
            margin-bottom: 5px;
            font-size: 24px;
            transition: color 0.3s;
        }
        .author {
            color: var(--secondary-text);
            font-style: italic;
            margin-bottom: 10px;
            transition: color 0.3s;
        }
        .description {
            color: var(--secondary-text);
            margin-bottom: 20px;
            transition: color 0.3s;
        }
        .theme-toggle {
            position: absolute;
            top: 35px; /* Adjusted to align with author name */
            right: 0;
            display: flex;
            align-items: center;
        }
        .switch {
            position: relative;
            display: inline-block;
            width: 120px;
            height: 34px;
        }
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--toggle-bg);
            transition: .4s;
            border-radius: 34px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 10px;
            font-size: 12px;
            font-weight: bold;
            color: var(--toggle-text);
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 60px;
            left: 4px;
            bottom: 4px;
            background-color: var(--toggle-slider);
            transition: .4s;
            border-radius: 34px;
            z-index: 1;
        }
        .slider-text {
            position: relative;
            z-index: 2;
            width: 100%;
            display: flex;
            justify-content: space-between;
        }
        .light-text, .dark-text {
            transition: opacity 0.3s;
        }
        .dark-mode .light-text {
            opacity: 0.5;
        }
        .light-text {
            opacity: 0.5;
        }
        .dark-mode .dark-text {
            opacity: 1;
        }
        .dark-text {
            opacity: 0.5;
        }
        input:checked + .slider:before {
            transform: translateX(52px);
        }
        .progress-container {
            background: var(--progress-bg);
            border-radius: 5px;
            margin-bottom: 20px;
            position: relative;
            height: 10px;
            transition: background-color 0.3s;
        }
        .progress-bar {
            height: 100%;
            background: var(--primary-color);
            border-radius: 5px;
            width: 0%;
            transition: width 0.3s ease, background-color 0.3s;
        }
        .stats {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            font-weight: bold;
            color: var(--header-color);
            transition: color 0.3s;
        }
        .question {
            background: var(--question-bg);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            transition: background-color 0.3s;
        }
        .question-number {
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 10px;
            transition: color 0.3s;
        }
        .question-text {
            font-size: 18px;
            margin-bottom: 15px;
        }
        .options {
            display: grid;
            grid-gap: 10px;
        }
        .option {
            padding: 12px 15px;
            background: var(--option-bg);
            border: 2px solid var(--border-color);
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .option:hover {
            background: var(--option-hover);
            border-color: var(--primary-color);
        }
        .option.selected {
            background: var(--option-selected);
            border-color: var(--primary-color);
        }
        .option.correct {
            background: var(--correct-bg);
            border-color: var(--correct-border);
        }
        .option.incorrect {
            background: var(--incorrect-bg);
            border-color: var(--incorrect-border);
        }
        .feedback {
            padding: 15px;
            border-radius: 5px;
            margin-top: 15px;
            display: none;
        }
        .feedback.correct {
            background: var(--correct-bg);
            color: var(--text-color);
            border: 1px solid var(--correct-border);
            display: block;
        }
        .feedback.incorrect {
            background: var(--incorrect-bg);
            color: var(--text-color);
            border: 1px solid var(--incorrect-border);
            display: block;
        }
        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }
        button {
            padding: 10px 20px;
            background: var(--button-bg);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background 0.3s;
        }
        button:hover {
            background: var(--button-hover);
        }
        button:disabled {
            background: var(--button-disabled);
            cursor: not-allowed;
        }
        .results {
            text-align: center;
            padding: 30px;
            display: none;
        }
        .score {
            font-size: 24px;
            margin-bottom: 20px;
            color: var(--header-color);
        }
        .score-value {
            font-size: 48px;
            color: var(--primary-color);
            font-weight: bold;
        }
        .restart-btn {
            margin-top: 20px;
            background: var(--restart-bg);
        }
        .restart-btn:hover {
            background: var(--restart-hover);
        }
        .review-btn {
            margin-top: 20px;
            background: var(--review-bg);
        }
        .review-btn:hover {
            background: var(--review-hover);
        }
        .review-section {
            margin-top: 30px;
            padding: 20px;
            background: var(--question-bg);
            border-radius: 8px;
            display: none;
        }
        .review-title {
            font-size: 20px;
            margin-bottom: 15px;
            color: var(--header-color);
            text-align: center;
        }
        .review-question {
            margin-bottom: 20px;
            padding: 15px;
            border-left: 4px solid var(--incorrect-border);
            background: var(--container-bg);
            border-radius: 4px;
        }
        .review-question-number {
            font-weight: bold;
            color: var(--incorrect-border);
            margin-bottom: 8px;
        }
        .review-question-text {
            margin-bottom: 10px;
        }
        .review-answer {
            margin-top: 8px;
            font-weight: bold;
        }
        .review-correct {
            color: var(--correct-border);
        }
        .review-explanation {
            margin-top: 5px;
            font-style: italic;
            color: var(--secondary-text);
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>MCQs on Kinesiology 1 Lecture No. 3 Quiz</h1>
            <p class="author">Dr. Samy Salem</p>
            <p class="description">Test your knowledge of Kinesiology 1 Lecture No. 3</p>
            <div class="theme-toggle">
                <label class="switch">
                    <input type="checkbox" id="dark-mode-toggle">
                    <span class="slider">
                        <div class="slider-text">
                            <span class="light-text">Light</span>
                            <span class="dark-text">Dark</span>
                        </div>
                    </span>
                </label>
            </div>
        </header>

        <div class="progress-container">
            <div class="progress-bar" id="progress-bar"></div>
        </div>

        <div class="stats">
            <div>Question: <span id="current-question">1</span>/<span id="total-questions">30</span></div>
            <div>Score: <span id="score">0</span>/<span id="total-score">30</span></div>
        </div>

        <div id="quiz-container">
            <!-- Questions will be inserted here by JavaScript -->
        </div>

        <div class="navigation">
            <button id="prev-btn" disabled>Previous</button>
            <button id="next-btn">Next</button>
        </div>

        <div id="results" class="results">
            <div class="score">Your Score: <span class="score-value" id="final-score">0</span>/30</div>
            <p id="performance-message"></p>
            <button class="restart-btn" id="restart-btn">Restart Quiz</button>
            <button class="review-btn" id="review-btn">Review Incorrect Answers</button>
        </div>

        <div id="review-section" class="review-section">
            <h2 class="review-title">Questions Answered Incorrectly</h2>
            <div id="incorrect-questions-list"></div>
        </div>
    </div>

    <script>
        // Quiz data (all 30 questions from the PDF)
        const quizData = [
            {
                question: "What is a primary stability function of the shoulder girdle?",
                options: [
                    "To provide the largest range of motion in the body",
                    "To act as a stable base for shoulder muscle force generation",
                    "To facilitate horizontal adduction and abduction",
                    "To allow for independent clavicular rotation"
                ],
                answer: 1,
                explanation: "To act as a stable base for shoulder muscle force generation (Page 138)"
            },
            {
                question: "A key mobility function of the shoulder girdle is to:",
                options: [
                    "Facilitate upper extremity movement by positioning the glenohumeral joint favorably",
                    "Provide the primary ligamentous restraint for the glenohumeral joint",
                    "Generate the majority of force for internal rotation",
                    "Prevent superior shear of the humeral head"
                ],
                answer: 0,
                explanation: "Facilitate upper extremity movement by positioning the glenohumeral joint favorably (Page 139)"
            },
            {
                question: "According to the generalized scapulohumeral rhythm, 180 degrees of shoulder abduction is the result of:",
                options: [
                    "90 degrees of glenohumeral abduction and 90 degrees of scapular upward rotation",
                    "120 degrees of glenohumeral abduction and 60 degrees of scapular upward rotation",
                    "150 degrees of glenohumeral abduction and 30 degrees of scapular upward rotation",
                    "60 degrees of glenohumeral abduction and 120 degrees of scapular upward rotation"
                ],
                answer: 1,
                explanation: "120 degrees of glenohumeral abduction and 60 degrees of scapular upward rotation (Page 146)"
            },
            {
                question: "The 60 degrees of upward rotation of the scapula during full shoulder abduction results from motion at which two joints?",
                options: [
                    "Glenohumeral and Scapulothoracic",
                    "Sternoclavicular and Acromioclavicular",
                    "Glenohumeral and Acromioclavicular",
                    "Sternoclavicular and Scapulothoracic"
                ],
                answer: 1,
                explanation: "Sternoclavicular and Acromioclavicular (Page 146)"
            },
            {
                question: "During full shoulder abduction, the clavicle:",
                options: [
                    "Protracts and anteriorly rotates",
                    "Elevates and depresses",
                    "Retracts and posteriorly rotates",
                    "Anteriorly tilts and internally rotates"
                ],
                answer: 2,
                explanation: "Retracts and posteriorly rotates (Page 146)"
            },
            {
                question: "Which kinematic principle states that the glenohumeral joint externally rotates during shoulder abduction?",
                options: [
                    "Principle 3",
                    "Principle 4",
                    "Principle 5",
                    "Principle 6"
                ],
                answer: 3,
                explanation: "Principle 6 (Page 146)"
            },
            {
                question: "The plot of shoulder abduction shows that most of the sternoclavicular joint elevation occurs during which phase?",
                options: [
                    "The late phase of abduction",
                    "Evenly throughout the entire range",
                    "The early phase of abduction",
                    "Only after 90 degrees of abduction"
                ],
                answer: 2,
                explanation: "The early phase of abduction (Page 144)"
            },
            {
                question: "What is the primary function of the rotator cuff muscles during shoulder movements?",
                options: [
                    "To initiate powerful shoulder abduction and flexion",
                    "To provide joint compression and resist destabilizing shear forces",
                    "To control movements of the scapula on the thorax",
                    "To limit the range of motion for joint protection"
                ],
                answer: 1,
                explanation: "To provide joint compression and resist destabilizing shear forces (Page 159)"
            },
            {
                question: "The deltoid muscle produces which of the following forces at the glenohumeral joint that requires stabilization?",
                options: [
                    "Anterior shear force",
                    "Inferior shear force",
                    "Compressive force",
                    "Superior shear force"
                ],
                answer: 3,
                explanation: "Superior shear force (Page 161)"
            },
            {
                question: "Which rotator cuff muscle resists the superior shear force of the deltoid and simultaneously produces internal rotation?",
                options: [
                    "Supraspinatus",
                    "Infraspinatus",
                    "Teres minor",
                    "Subscapularis"
                ],
                answer: 3,
                explanation: "Subscapularis (Page 162)"
            },
            {
                question: "The infraspinatus and teres minor muscles work together to neutralize the internal rotation force of which muscles as well as resisting superior shear?",
                options: [
                    "Deltoid",
                    "Supraspinatus",
                    "Subscapularis",
                    "Latissimus Dorsi"
                ],
                answer: 2,
                explanation: "Subscapularis (Page 163)"
            },
            {
                question: "A force couple is defined as:",
                options: [
                    "A single large force generating movement",
                    "Two forces equal in magnitude but opposite in direction",
                    "The synergistic action of ligaments and muscles",
                    "The primary and secondary movers of a joint"
                ],
                answer: 1,
                explanation: "Two forces equal in magnitude but opposite in direction (Page 141)"
            },
            {
                question: "When the latissimus dorsi pulls the humerus inferiorly, its destabilizing action is resisted by which muscle?",
                options: [
                    "Deltoid",
                    "Supraspinatus",
                    "Teres Major",
                    "Biceps Brachii"
                ],
                answer: 1,
                explanation: "Supraspinatus (Page 166)"
            },
            {
                question: "The large range of motion of the shoulder complex is due to all of the following EXCEPT:",
                options: [
                    "Poor bony structure",
                    "Poor ligamentous restraint",
                    "Scapulohumeral coordination",
                    "A deep and constraining glenoid fossa"
                ],
                answer: 3,
                explanation: "A deep and constraining glenoid fossa (Page 155)"
            },
            {
                question: "The arthrokinematics for glenohumeral abduction and adduction involve:",
                options: [
                    "A spin between the humeral head and glenoid fossa",
                    "Roll and slide along the joint's transverse diameter",
                    "Roll and slide along the joint's longitudinal diameter",
                    "Primarily a glide with minimal roll"
                ],
                answer: 2,
                explanation: "Roll and slide along the joint's longitudinal diameter (Page 147)"
            },
            {
                question: "For internal and external rotation in the horizontal plane, the arthrokinematics at the glenohumeral joint are:",
                options: [
                    "A spin between humeral head and glenoid fossa",
                    "Roll and slide along the joint's longitudinal diameter",
                    "Roll and slide along the joint's transverse diameter",
                    "Pure translation"
                ],
                answer: 2,
                explanation: "Roll and slide along the joint's transverse diameter (Page 147)"
            },
            {
                question: "During shoulder movements, tension development in an agonist muscle often requires tension in its antagonist to:",
                options: [
                    "Prevent dislocation of the humeral head",
                    "Increase the overall force output",
                    "Enhance the speed of contraction",
                    "Initiate the stretch reflex"
                ],
                answer: 0,
                explanation: "Prevent dislocation of the humeral head (Page 141)"
            },
            {
                question: "Which of the following is NOT a dynamic stabilization mechanism of the shoulder?",
                options: [
                    "Passive muscle tension",
                    "Compressive forces from muscle contraction",
                    "The depth of the glenoid labrum",
                    "Redirection of joint force toward the center of the GH joint"
                ],
                answer: 2,
                explanation: "The depth of the glenoid labrum (Page 140)"
            },
            {
                question: "Which of the following is the most common mechanism for a glenohumeral joint dislocation?",
                options: [
                    "Falling on an outstretched hand with the shoulder adducted",
                    "A direct blow to the posterior shoulder",
                    "Abduction and external rotation of the overhead arm",
                    "Forced internal rotation from a fall"
                ],
                answer: 2,
                explanation: "Abduction and external rotation of the overhead arm (Page 183)"
            },
            {
                question: "The most common direction for a glenohumeral dislocation is:",
                options: [
                    "Posterior",
                    "Superior",
                    "Anterior-inferior",
                    "Posterior-superior"
                ],
                answer: 2,
                explanation: "Anterior-inferior (Page 183)"
            },
            {
                question: "Impingement in the subacromial space can be caused by all of the following mechanisms EXCEPT:",
                options: [
                    "A weak or inflexible rotator cuff",
                    "A large anatomical space under the coracoacromial arch",
                    "Hyperabduction of the glenohumeral joint",
                    "Glenohumeral abduction combined with internal rotation"
                ],
                answer: 1,
                explanation: "A large anatomical space under the coracoacromial arch (Page 170)"
            },
            {
                question: "Impingement during abduction occurs when:",
                options: [
                    "An inferior slide accompanies the superior roll of the humeral head",
                    "The humerus translates inferiorly without rolling",
                    "A superior roll occurs without a concurrent inferior slide",
                    "None of the above"
                ],
                answer: 2,
                explanation: "A superior roll occurs without a concurrent inferior slide (Page 172)"
            },
            {
                question: "During the arm recovery phase in swimming, the mechanism that increases the risk of shoulder impingement is:",
                options: [
                    "Abduction and External Rotation",
                    "Adduction and Internal Rotation",
                    "Abduction and Internal Rotation",
                    "Flexion and External Rotation"
                ],
                answer: 2,
                explanation: "Abduction and Internal Rotation (Page 177)"
            },
            {
                question: "A solution to reduce impingement risk during swimming is to:",
                options: [
                    "Decrease body roll to stabilize the trunk",
                    "Lead with the thumb during recovery to increase internal rotation",
                    "Increase body roll to decrease abduction",
                    "Keep the elbow low during the pull phase"
                ],
                answer: 2,
                explanation: "Increase body roll to decrease abduction (Page 177)"
            },
            {
                question: "A posterior dislocation of the sternoclavicular joint is considered serious because of potential damage to the:",
                options: [
                    "Brachial plexus and subclavian artery",
                    "Lung apex and phrenic nerve",
                    "Suprascapular nerve and artery",
                    "Trachea, esophagus, and major blood vessels"
                ],
                answer: 3,
                explanation: "Trachea, esophagus, and major blood vessels (Page 182)"
            },
            {
                question: "Which of the following is an intrinsic risk factor for injury?",
                options: [
                    "Weather conditions",
                    "Type of sports equipment",
                    "Overtraining",
                    "Opponent behavior"
                ],
                answer: 2,
                explanation: "Overtraining (Page 175)"
            },
            {
                question: "A good technique of movement is characterized by:",
                options: [
                    "Maximizing force output in a single muscle group",
                    "Minimizing risk of injury by distributing load throughout the kinetic chain",
                    "Utilizing abnormal joint movements for competitive advantage",
                    "Focusing solely on the effectiveness of performance"
                ],
                answer: 1,
                explanation: "Minimizing risk of injury by distributing load throughout the kinetic chain (Page 176)"
            },
            {
                question: "Fractures to the middle third of the clavicle are commonly caused by:",
                options: [
                    "A direct blow to the sternum",
                    "Falling on the shoulder or an outstretched arm",
                    "Forced retraction of the scapula",
                    "Repetitive overhead motions"
                ],
                answer: 1,
                explanation: "Falling on the shoulder or an outstretched arm (Page 182)"
            },
            {
                question: "During 180 degrees of shoulder abduction, the scapula exhibits:",
                options: [
                    "Posterior tilting and external rotation",
                    "Anterior tilting and internal rotation",
                    "Downward rotation and depression",
                    "Elevation and protraction"
                ],
                answer: 0,
                explanation: "Posterior tilting and external rotation (Page 143)"
            },
            {
                question: "Posterior rotation of the clavicle during shoulder abduction is facilitated by tension in which structure?",
                options: [
                    "The AC joint capsule",
                    "The costoclavicular ligament",
                    "The sternoclavicular articular disc",
                    "The coracoclavicular ligament"
                ],
                answer: 3,
                explanation: "The coracoclavicular ligament (Page 145)"
            }
        ];

        // Quiz state variables
        let currentQuestion = 0;
        let score = 0;
        let userAnswers = new Array(quizData.length).fill(null);
        let incorrectQuestions = [];

        // DOM elements
        const quizContainer = document.getElementById('quiz-container');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const progressBar = document.getElementById('progress-bar');
        const currentQuestionEl = document.getElementById('current-question');
        const totalQuestionsEl = document.getElementById('total-questions');
        const scoreEl = document.getElementById('score');
        const totalScoreEl = document.getElementById('total-score');
        const resultsContainer = document.getElementById('results');
        const finalScoreEl = document.getElementById('final-score');
        const performanceMessageEl = document.getElementById('performance-message');
        const restartBtn = document.getElementById('restart-btn');
        const reviewBtn = document.getElementById('review-btn');
        const reviewSection = document.getElementById('review-section');
        const incorrectQuestionsList = document.getElementById('incorrect-questions-list');
        const darkModeToggle = document.getElementById('dark-mode-toggle');
        const lightText = document.querySelector('.light-text');
        const darkText = document.querySelector('.dark-text');

        // Initialize quiz
        function initQuiz() {
            totalQuestionsEl.textContent = quizData.length;
            totalScoreEl.textContent = quizData.length;
            showQuestion();
            updateProgressBar();
            
            // Initialize dark mode based on system preference
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                document.body.classList.add('dark-mode');
                darkModeToggle.checked = true;
                updateToggleText(true);
            } else {
                updateToggleText(false);
            }
            
            // Event listeners
            prevBtn.addEventListener('click', showPreviousQuestion);
            nextBtn.addEventListener('click', showNextQuestion);
            restartBtn.addEventListener('click', restartQuiz);
            reviewBtn.addEventListener('click', showIncorrectQuestions);
            darkModeToggle.addEventListener('change', toggleDarkMode);
        }

        // Toggle dark mode
        function toggleDarkMode() {
            const isDarkMode = darkModeToggle.checked;
            document.body.classList.toggle('dark-mode', isDarkMode);
            updateToggleText(isDarkMode);
        }

        // Update toggle text opacity
        function updateToggleText(isDarkMode) {
            if (isDarkMode) {
                lightText.style.opacity = '0.5';
                darkText.style.opacity = '1';
            } else {
                lightText.style.opacity = '1';
                darkText.style.opacity = '0.5';
            }
        }

        // Show current question
        function showQuestion() {
            currentQuestionEl.textContent = currentQuestion + 1;
            scoreEl.textContent = score;
            
            const question = quizData[currentQuestion];
            let optionsHTML = '';
            
            question.options.forEach((option, index) => {
                let optionClass = 'option';
                if (userAnswers[currentQuestion] === index) {
                    optionClass += ' selected';
                    if (index === question.answer) {
                        optionClass += ' correct';
                    } else {
                        optionClass += ' incorrect';
                    }
                }
                
                optionsHTML += `
                    <div class="${optionClass}" data-index="${index}">
                        ${String.fromCharCode(65 + index)}) ${option}
                    </div>
                `;
            });
            
            let feedbackHTML = '';
            if (userAnswers[currentQuestion] !== null) {
                const isCorrect = userAnswers[currentQuestion] === question.answer;
                feedbackHTML = `
                    <div class="feedback ${isCorrect ? 'correct' : 'incorrect'}">
                        ${isCorrect ? '✓ Correct!' : '✗ Incorrect!'} 
                        ${!isCorrect ? `Correct answer: ${String.fromCharCode(65 + question.answer)}) ${question.options[question.answer]}` : ''}
                        <br><br>Explanation: ${question.explanation}
                    </div>
                `;
            }
            
            quizContainer.innerHTML = `
                <div class="question">
                    <div class="question-number">Question ${currentQuestion + 1}/${quizData.length}</div>
                    <div class="question-text">${question.question}</div>
                    <div class="options">${optionsHTML}</div>
                    ${feedbackHTML}
                </div>
            `;
            
            // Add event listeners to options
            const optionElements = quizContainer.querySelectorAll('.option');
            optionElements.forEach(option => {
                option.addEventListener('click', selectOption);
            });
            
            // Update navigation buttons
            prevBtn.disabled = currentQuestion === 0;
            nextBtn.textContent = currentQuestion === quizData.length - 1 ? 'Finish Quiz' : 'Next';
        }

        // Select an option
        function selectOption(e) {
            if (userAnswers[currentQuestion] !== null) return; // Already answered
            
            const selectedOption = e.currentTarget;
            const selectedIndex = parseInt(selectedOption.dataset.index);
            
            userAnswers[currentQuestion] = selectedIndex;
            
            // Check if answer is correct
            if (selectedIndex === quizData[currentQuestion].answer) {
                score++;
                scoreEl.textContent = score;
            } else {
                // Add to incorrect questions list
                incorrectQuestions.push({
                    question: quizData[currentQuestion].question,
                    userAnswer: selectedIndex,
                    correctAnswer: quizData[currentQuestion].answer,
                    options: quizData[currentQuestion].options,
                    explanation: quizData[currentQuestion].explanation,
                    questionNumber: currentQuestion + 1
                });
            }
            
            showQuestion();
            updateProgressBar();
        }

        // Show next question
        function showNextQuestion() {
            if (currentQuestion < quizData.length - 1) {
                currentQuestion++;
                showQuestion();
            } else {
                showResults();
            }
        }

        // Show previous question
        function showPreviousQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                showQuestion();
            }
        }

        // Update progress bar
        function updateProgressBar() {
            const progress = ((currentQuestion + 1) / quizData.length) * 100;
            progressBar.style.width = `${progress}%`;
        }

        // Show results
        function showResults() {
            quizContainer.style.display = 'none';
            document.querySelector('.navigation').style.display = 'none';
            document.querySelector('.progress-container').style.display = 'none';
            document.querySelector('.stats').style.display = 'none';
            
            finalScoreEl.textContent = score;
            
            // Performance message
            const percentage = (score / quizData.length) * 100;
            let message = '';
            if (percentage >= 80) {
                message = 'Excellent! You have a strong understanding of Kinesiology 1 Lecture No. 3.';
            } else if (percentage >= 60) {
                message = 'Good job! You have a solid grasp of the material.';
            } else if (percentage >= 40) {
                message = 'Not bad! Review the material and try again.';
            } else {
                message = 'Keep studying! Review the lectures and try again.';
            }
            
            performanceMessageEl.textContent = message;
            resultsContainer.style.display = 'block';
            
            // Show review button only if there are incorrect answers
            if (incorrectQuestions.length > 0) {
                reviewBtn.style.display = 'inline-block';
            } else {
                reviewBtn.style.display = 'none';
            }
        }

        // Show incorrect questions
        function showIncorrectQuestions() {
            resultsContainer.style.display = 'none';
            reviewSection.style.display = 'block';
            
            let incorrectHTML = '';
            incorrectQuestions.forEach((item, index) => {
                incorrectHTML += `
                    <div class="review-question">
                        <div class="review-question-number">Question ${item.questionNumber}</div>
                        <div class="review-question-text">${item.question}</div>
                        <div>Your answer: ${String.fromCharCode(65 + item.userAnswer)}) ${item.options[item.userAnswer]}</div>
                        <div class="review-answer review-correct">Correct answer: ${String.fromCharCode(65 + item.correctAnswer)}) ${item.options[item.correctAnswer]}</div>
                        <div class="review-explanation">${item.explanation}</div>
                    </div>
                `;
            });
            
            incorrectQuestionsList.innerHTML = incorrectHTML;
        }

        // Restart quiz
        function restartQuiz() {
            currentQuestion = 0;
            score = 0;
            userAnswers = new Array(quizData.length).fill(null);
            incorrectQuestions = [];
            
            quizContainer.style.display = 'block';
            document.querySelector('.navigation').style.display = 'flex';
            document.querySelector('.progress-container').style.display = 'block';
            document.querySelector('.stats').style.display = 'flex';
            resultsContainer.style.display = 'none';
            reviewSection.style.display = 'none';
            
            showQuestion();
            updateProgressBar();
        }

        // Initialize the quiz when the page loads
        window.onload = initQuiz;
    </script>
</body>
</html>